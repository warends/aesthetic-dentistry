(function(a){"use strict";var b=function(a){if(elementorFrontend.isEditMode()||!elementorFrontend.isEditMode()){let i=a[0].querySelector(".tp-scroll-sequence");if(i){let a=i.getAttribute("data-attr");a=JSON.parse(a);let p=a.widget_id?a.widget_id:"",q=a&&a.applyto?a.applyto:"default",r=a&&a.seclist?a.seclist:"",s="",t="",u="";var b=[],c=[];if(r)for(var d=0;d<r.length;d++)if(r[d].sectionId){var e=document.querySelector(`#${r[d].sectionId}`),f=r[d].offsetop?r[d].offsetop.size:"";c.push(e),e?e.classList.add("tp-animation-hide"):"",b.push(f)}if("default"==q?(t=i.closest(".elementor-section,.e-con"),u=t.getAttribute("data-id"),s=".elementor-element-"+u):"body"==q?(t=document.querySelector("body"),s="body"):"innerContainer"==q&&(t=i.closest(".elementor-column"),t&&(u=t.getAttribute("data-id"),s=".elementor-element-"+u)),t&&s){function d(){G={objArray:[],absoluteOrder:[],imageTotalNo:0,priorityCount:0,nonPriorityCount:0,priorityDone:!1,nonpriorityDone:!1,firstDrawEn:!1};let a=0;G.objArray=[],G.imageTotalNo+=g.length,G.objArray=[];for(let b=0;b<g.length;b++)G.objArray[b]=new Image,G.absoluteOrder[a]=[b],++a}function e(){F={},document.querySelector(s)&&(F.scStart=document.querySelector(s).getBoundingClientRect().top+window.scrollY+j,F.scEnd=F.scStart+document.querySelector(s).clientHeight-window.innerHeight+k,F.scInBetween=document.querySelector(s).clientHeight-window.innerHeight+k)}function f(a){let b;a>=F.scStart&&a<F.scEnd?(b="active",a>=F.scStart&&a<F.scEnd&&(J.pageProgress=(a-F.scStart)/F.scInBetween,J.image=Math.round(J.pageProgress*(g.length-1)))):a<F.scStart?b="before":b="after",H!==b&&(H=b),"active"===b&&I!==J.image&&(I=J.image,x(J.image)),a>=F.scStart&&a<F.scEnd?i():c.forEach(function(a){a&&(a.classList.add("tp-animation-hide"),a.classList.remove("tp-animation-start"))})}function i(){var a=window.pageYOffset||document.documentElement.scrollTop;c.forEach(function(c,d){let e=J.image,f=r[d].secStart?r[d].secStart:"",g=r[d].secEnd?r[d].secEnd:"",h=c?c.classList:"",i=r[d].secAnimationstart,j=r[d].secAnimationend;c&&(a>o?e>=f&&e<=g?(h.remove("tp-animation-hide"),h.contains("tp-animation-end")?h.remove("tp-animation-end"):h.add("tp-animation-start"),c.style.cssText=`top:${b[d]}%`,"none"!=i&&(N("end",h,i,j),M("start",h,i))):e>=g&&(N("start",h,i),"none"!=i&&M("end",h,i,j),setTimeout(()=>{h.remove("tp-animation-start"),h.add("tp-animation-end")},500)):a<o&&(e<=g&&e>=f?(h.contains("tp-animation-end")?h.remove("tp-animation-end"):h.add("tp-animation-start"),c.style.cssText=`top:${b[d]}%`,N("end",h,i,j),"none"!=i&&M("start",h,i)):e<=f&&(N("start",h,i),"none"!=i&&M("end",h,i,j),setTimeout(()=>{h.remove("tp-animation-start"),h.add("tp-animation-end")},500))))}),o=0>=a?0:a}function q(a,b){"scroll"===b?f(a):"resize"===b?document.documentElement.clientWidth===O?document.documentElement.clientHeight!==P&&(P=document.documentElement.clientHeight,x(J.image)):(O=document.documentElement.clientWidth,e(),x(J.image)):"orientationchange"===b?(e(),x(J.image)):console.log("Sorry error not recognized.")}function u(a,b){L||(window.requestAnimationFrame(function(){q(a,b),L=!1}),L=!0)}function v(){e(),E(window.scrollY),f(window.scrollY),"before"===H?(f(F.scStart),f(window.scrollY)):"active"===H?f(window.scrollY):"after"===H?(f(F.scEnd-1),f(window.scrollY)):void 0,window.addEventListener("scroll",()=>{u(window.scrollY,"scroll")}),window.addEventListener("resize",()=>{u(window.scrollY,"resize")}),window.addEventListener("orientationchange",()=>{u(window.scrollY,"orientationchange")});let a=0;setInterval(function(){++a,e()},1e3)}function w(){K.aascr=window.scrollY,K.active={},K.active.pageProgress=J.pageProgress,K.active.image=J.image,K.active.pixel=J.pixel,K.active.isActive=J.isActive,K.active.isActive&&(K.active.curAbsImg=z(K.active.image)),K.notActive=[],window.scrollY<F.scStart&&K.notActive.push({type:"next",distance:Math.abs(window.scrollY-F.scStart),image:0,pageProgress:0}),window.scrollY>F.scEnd&&K.notActive.push({type:"prev",distance:Math.abs(window.scrollY-F.scEnd),image:g.length-1,pageProgress:1});let a=[];for(let b=0;b<K.notActive.length;b++)a[b]=K.notActive[b].distance;a.sort((c,a)=>c-a);for(let b=0;b<K.notActive.length;b++)if(a[0]===K.notActive[b].distance){K.notActive.nearAbsImg=z(K.notActive[b].image);break}K.inCurImage=null==K.active.curAbsImg?K.notActive.nearAbsImg:K.active.curAbsImg}function x(a){if(G.objArray[a].imageLoad){let b,c,d,e=1,f=l.querySelector(".tp-scroll-seq-inner");b=f.offsetWidth,c=f.offsetHeight,d=b/c,m.style.width=b+"px",m.style.height=c+"px",n.canvas.width=b*e,n.canvas.height=c*e,1<=d?y(G.objArray[a]):y(G.objArray[a])}else console.log("Image [image] was not loaded in time ")}function y(a){var b=Math.max(m.width/a.width,m.height/a.height),c=m.width/2-a.width/2*b,d=m.height/2-a.height/2*b;n.drawImage(a,Math.round(c),Math.round(d),Math.ceil(a.width*b),Math.ceil(a.height*b))}function z(a){for(let b=0;b<G.imageTotalNo;b++)if(G.absoluteOrder[b][0]===a){return b}}function A(){this.imageLoad=!0,B(this.aPriority)}function B(a){if(a?++G.priorityCount:++G.nonPriorityCount,G.priorityCount>=G.priorityImageArray.length&&(G.priorityDone=!0),G.nonPriorityCount>=G.nonPriorityImageCountRequired&&(G.nonpriorityDone=!0),G.priorityDone&&G.nonpriorityDone&&!G.firstDrawEn){G.firstDrawEn=!0,v();const a=document.createEvent("Event");a.initEvent("scrollPreloadPercentage",!0,!0),document.dispatchEvent(a)}}function C(){G.priorityImageArray=[];for(let b=0;b<K.notActive.length;b++){var a=K.notActive[b].image;G.priorityImageArray[b]=z(a),G.objArray[a].aPriority=!0,G.objArray[a].aImgInfo={image:a},G.objArray[a].onload=A,G.objArray[a].src=g[a]}G.nonPriorityImageArray=((a,b)=>a.filter(a=>!b.includes(a)))(G.dumbPreloadOrder,G.priorityImageArray);for(var a,b=0;b<G.nonPriorityImageArray.length;b++)a=G.absoluteOrder[G.nonPriorityImageArray[b]][0],G.objArray[a].aPriority=!1,G.objArray[a].aImgInfo={image:a},G.objArray[a].onload=A,G.objArray[a].src=g[a];G.nonPriorityImageCountRequired=Math.round((G.imageTotalNo-G.priorityImageArray.length)*h)}function D(a,b){for(var c=[],d=0;d<b/2;d++)c[d]=2*d+1;for(var e=[],d=0;d<(b-a)/2;d++)e[d]=Math.log((b-a)/c[d])/Math.log(2);for(var f=[],d=0;d<(b-a)/2;d++){f[d]=[];for(var g=0;g<e[d];g++)f[d][g]=Math.pow(2,[g])*c[d]+a}for(var h,k=[],l=f.length,d=0;d<l;d++){h=f[d].length;for(var g=0;g<h;g++)k.push(f[d][g])}for(var m=[],d=0;d<a/2;d++)m[d]=Math.log(a/c[d])/Math.log(2);for(var n=[],d=0;d<a/2;d++){n[d]=[];for(var g=0;g<=m[d];g++)n[d][g]=-Math.pow(2,[g])*c[d]+a}for(var o,p=[],q=n.length,d=0;d<q;d++){o=n[d].length;for(var g=0;g<o;g++)p.push(n[d][g])}for(var r=[a],s=Math.max(k.length,p.length),d=0;d<s;d++)void 0!==k[d]&&r.push(k[d]),void 0!==p[d]&&r.push(p[d]);G.dumbPreloadOrder=r}function E(a){J.isActive=!1,a>=F.scStart&&a<F.scEnd&&(J.isActive=!0,a>=F.scStart&&a<F.scEnd&&(J.pageProgress=(a-F.scStart)/F.scEnd,J.image=Math.round(J.pageProgress*(g.length-1)),J.pixel=a)),J.isActive||(J.isActive=!1,J.pageProgress,J.image,J.pixel=a)}var g=a.imgGellary?a.imgGellary:"",h=a.preloadImg?a.preloadImg/100:0,j=a.startOffset?+a.startOffset:0,k=a.endOffset?+a.endOffset:0;t.insertAdjacentHTML("afterbegin",`<div class="tp-scroll-sequence-canvas"><div class="tp-scroll-seq-inner elementor-element-${p}-canvas"><canvas/></div></div>`);let F,G,H,I,J={},K={},L=!1;var l=document.querySelector(s),m=l.querySelector("canvas"),n=m.getContext("2d");d();var o=0;const M=(a,b,c,d)=>{"start"==a&&(b.add(`${c}`),b.add("tp-plus-animated")),"end"==a&&(b.add(`${d}`),b.add("tp-plus-animated"))},N=(a,b,c,d)=>{"start"==a&&(b.remove(`${c}`),b.remove("tp-plus-animated")),"end"==a&&(b.remove(`${d}`),b.remove("tp-plus-animated"))};let O,P;setTimeout(()=>{G&&G.imageTotalNo&&(e(),E(window.scrollY),w(),D(K.inCurImage,G.imageTotalNo),C())},50)}}}};a(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/tp-scroll-sequence.default",b)})})(jQuery);